import entrega2.*

describe "Tests del Cuarto Punto"{
	const alacachulaCachicomula = new Logos(nombre="alacachula Cachicomula",multiplicador=1)
	const xenia = new Personaje(alacachulaCachicomula,100,[])
	const thor = new Personaje(hechizoPreferido=hechizoBasico)
	const loki = new Personaje(hechizoPreferido=hechizoBasico,monedasOro=5)
	const espada = new Arma()
	const collarDivino = new CollarDivino(perlas = 5)
	const armaduraSinRefuerzo = new Armadura(baseArmadura=2,refuerzo=ninguno)
	const cotaDeMalla = new CotaDeMalla(5) 
	const armaduraConRefuerzo = new Armadura(baseArmadura=2,refuerzo = cotaDeMalla) 
	const bendicion = new Bendicion(thor)
	const armaduraConBendicion = new Armadura(baseArmadura=2,refuerzo = bendicion)
	const hechizo = new Hechizo(hechizo = alacachulaCachicomula)
	const armaduraConHechizo = new Armadura(baseArmadura=2,refuerzo = hechizo)
	const libroDeHechizos = new LibroHechizos(hechizos = [alacachulaCachicomula,hechizoBasico])
	const espejoFantastico = new Espejo()
	
	//Tests Cuarto Punto
	
	test "El precio del Hechizo Logos  “alacachula cachicomula” es 22" {
		assert.equals(22,alacachulaCachicomula.precio())
	}
	
	test "A Xenia le quedan 100 monedas despues de canjear su hechizo por uno basico" {
		xenia.canjear(hechizoBasico)
		assert.equals(100,xenia.monedasOro())
	}
	
	test "A Thor le quedan 83 monedas despues de canjear su hechizo por el Logos “alacachula cachicomula”" {
		thor.canjear(alacachulaCachicomula)
		assert.equals(83,thor.monedasOro())
	}
	test "A Thor le quedan 90 monedas despues de canjear su hechizo por si mismo 2 veces" {
		thor.canjear(hechizoBasico)
		thor.canjear(hechizoBasico)
		assert.equals(90,thor.monedasOro())
	}
	test "Loki no puede canjear su hechizo por el de “alacachula cachicomula”" {
		
		assert.throwsExceptionWithMessage("No puede Canjear el hechizo",{loki.canjear(alacachulaCachicomula)})
	}
	test "A Xenia le quedan 70.5 monedas despues de comprar una espada, un collar divino, una armadura sin refuerzo y otra armadura con malla de cota" {		
		xenia.comprar(espada)
		xenia.comprar(collarDivino)
		xenia.comprar(armaduraSinRefuerzo)
		xenia.comprar(armaduraConRefuerzo)
		assert.equals(70.5,xenia.monedasOro())
	}
	
	test "Xenia tiene 4 artefactos despues de comprar una espada, un collar divino, una armadura sin refuerzo y otra armadura con malla de cota" {
		xenia.comprar(espada)
		xenia.comprar(collarDivino)
		xenia.comprar(armaduraSinRefuerzo)
		xenia.comprar(armaduraConRefuerzo)
		assert.equals(4,xenia.artefactos().size())
	}
	
	test "A Thor le quedan 74 monedas despues de comprar una armadura con bendición como refuerzo, y una armadura reforzada con el hechizo alacachula" {
		thor.comprar(armaduraConBendicion)
		thor.comprar(armaduraConHechizo)	
		assert.equals(74,thor.monedasOro())
	}
	test "Loki no puede comprar un Espejo" {
		assert.throwsExceptionWithMessage("No puede Comprar el artefacto",{loki.comprar(espejoFantastico)})
	}
	
	test "A Xenia le quedan 59 monedas despues de canjear por un libro de hechizos que contiene el hechizo de logos de nombre “alacachula cachicomula” y el hechizo básico" {
		xenia.canjear(libroDeHechizos)
		assert.equals(69,xenia.monedasOro())
	}
}
	